<script>
    import { stores } from '@sapper/app';
    
    const { page, session } = stores();

    $: analyticsId = $session.analyticsId;
    $: path = Object.keys($page.query).length === 0
        ? $page.path : `${$page.path}?${new URLSearchParams($page.query).toString()}`;

    $: if (!!analyticsId && typeof window !== 'undefined' && typeof gtag !== 'undefined') {
        gtag('config', analyticsId, { page_path: path });
    }
</script>