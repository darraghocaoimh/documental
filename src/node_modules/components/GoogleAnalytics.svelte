<script>
    import { stores } from '@sapper/app';

    export let analyticsId;
    
    const { page } = stores();

    $: {
        if (!!analyticsId && typeof gtag !== 'undefined') {
            gtag('config', analyticsId, {
                page_path: $page.path
            });
        }
    }
</script>

<svelte:head>
    {#if !!analyticsId}
        <script async src={`https://www.googletagmanager.com/gtag/js?id=${analyticsId}`}></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', analyticsId);
        </script>
    {/if}
</svelte:head>