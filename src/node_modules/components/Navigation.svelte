<script>
	import { menuOpen } from 'stores/menu';
	import { _ } from 'svelte-i18n';

	import ProjectNavigation from 'components/ProjectNavigation.svelte';
</script>

<nav id='site-navigation' aria-labelledby='menu-button' class:open={$menuOpen}>
	<ul class='top-level'>
		<li>
			<h2>{$_('navigation.openData')}</h2>
			<ul>
				<li>
					<ProjectNavigation category='data' project='duchas' heading='DÃºchas' latestVersion='v0.5' index='api'/>
				</li>
				<li>
					<ProjectNavigation category='data' project='logainm' heading='Logainm' latestVersion='v0.9' index='api'/>
				</li>
				<li>
					<ProjectNavigation category='data' project='surnames' heading={$_('navigation.surnames')} singleton/>
				</li>
			</ul>
		</li>
		<li>
			<h2>{$_('navigation.software')}</h2>
			<ul>
				<li>
					<ProjectNavigation category='software' project='terminologue' heading='Terminologue' index='intro'/>
				</li>
				<li>
					<ProjectNavigation category='software' project='geonames2sql' heading='GeoNames2Sql' singleton/>
				</li>
				<li>
					<ProjectNavigation category='software' project='localizer' heading='Gaois.Localizer' singleton/>
				</li>
				<li>
					<ProjectNavigation category='software' project='querylogger' heading='Gaois.QueryLogger' latestVersion='v0.7' index='intro'/>
				</li>
			</ul>
		</li>
	</ul>
</nav>

<style>
	nav {
		font-weight: 300;
		padding: 6rem 1rem 0 1rem;
		z-index: 9;
	}

	:global(.js) nav {
		background-color: #fff;
		border-top: 5px solid var(--secondary-color);
		bottom: 0;
		height: 100%;
		height: calc(100vh - 10.5rem);
		left: 0;
		overflow-y: auto;
		padding: 1.2rem 1rem 1rem 1rem;
		position: fixed;
		transform: translateY(100%);
		transform: translateY(calc(100vh - 10.5rem + 2.8rem));
		transition: transform 0.45s ease-in-out;
		width: 100%;
	}

	:global(.js) nav.open {
		transform: translateY(0);
	}

	ul {
		margin: 0;
		padding: 0;
		text-transform: uppercase;
	}

	:global(.js) .top-level {
		margin-bottom: 6rem;
	}

	li {
		display: block;
	}

	h2 {
		font-weight: 700;
		font-size: 1rem;
		margin: 0.5em 0 0 0;
		padding: 1em 0.5em;
	}

	ul ul {
		color: #666;
		text-transform: none;
	}

	ul ul ul {
		margin-left: 1rem;
	}

    @media screen and (min-width: 1000px) {
		nav,
		:global(.js) nav {
			height: 100%;
			height: 100vh;
			min-width: 14.2rem;
			padding-top: 7.5rem;
			width: 18%;
		}
		
		:global(.js) nav {
			background-color: inherit;
			border-top: 0;
			overflow-y: visible;
			padding: 7.5rem 1rem 0 1rem;
			position: static;
			transform: translateY(0);
		}

		:global(.js) .top-level {
			margin-bottom: 0;
		}
    }
</style>