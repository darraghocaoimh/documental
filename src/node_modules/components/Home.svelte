<script>
	import { stores } from '@sapper/app';
	import settings from 'settings';
    import { _, locale } from 'svelte-i18n';
    
    const { page } = stores();

	$: url = (!!$page.params.locale) ? `${settings.url}/${$locale}` : `${settings.url}`;
	$: localeAlternate = ($locale === 'ga') ? 'en' : 'ga';
	$: urlAlternate = `${settings.url}/${localeAlternate}`;
	$: openGraphLocale = ($locale === 'ga') ? 'ga_IE' : 'en_GB';
	$: openGraphLocaleAlternate = ($locale === 'ga') ? 'en_GB' : 'ga_IE';
</script>

<svelte:head>
	<title>{$_('home.title')} | {$_('global.groupName')}</title>
	<meta property='og:title' content={$_('home.title')}>
    <meta name='twitter:title' content={`${$_('home.title')} | ${$_('global.groupName')}`}>

	<meta name='description' content={$_('global.description')}>
	<meta property='og:description' content={$_('global.description')}>
	<meta name='twitter:description' content={$_('global.description')}>
	<meta name='keywords' content={$_('global.keywords')}>

	<link rel="alternate" hreflang={localeAlternate} href={urlAlternate}>
	<meta property='og:locale' content={openGraphLocale}>
	<meta property='og:locale:alternate' content={openGraphLocaleAlternate}>
	<meta property='og:url' content={url}>
    <meta name='twitter:url' content={url}>
</svelte:head>

<div class='home'>
	<header>
		<h1>{$_('home.heading')}</h1>
		<p>{@html $_('home.tagline', { values: { link: `<a rel='noopener' href='https://www.gaois.ie/${$locale}'>${$_(`global.groupName`)}</a>` }})}</p>
	</header>
	<section>
		<h2>{$_('home.openData')}</h2>
		<ul>
			<li>
				<article>
					<a href={`/${$locale}/data/duchas/v0.5/api`}>
						<h3>Dúchas</h3>
						<p>{$_('home.sections.duchas')}</p>
					</a>
				</article>
			</li>
			<li>
				<article>
					<a href={`/${$locale}/data/logainm/v0.9/api`}>
						<h3>Logainm</h3>
						<p>{$_('home.sections.logainm')}</p>
					</a>
				</article>
			</li>
			<li>
				<article>
					<a href={`/${$locale}/data/surnames`}>
						<h3>{$_('navigation.surnames')}</h3>
						<p>{$_('home.sections.surnames')}</p>
					</a>
				</article>
			</li>
		</ul>
	</section>
	<section>
		<h2>{$_('home.software')}</h2>
		<ul>
			<li>
				<article>
					<a href={`/${$locale}/software/terminologue/intro`}>
						<h3>Terminologue</h3>
						<p>{$_('home.sections.terminologue')}</p>
					</a>
				</article>
			</li>
			<li>
				<article>
					<a href={`/${$locale}/software/geonames2sql`}>
						<h3>GeoNames2Sql</h3>
						<p>{$_('home.sections.geoNames2Sql')}</p>
					</a>
				</article>
			</li>
			<li>
				<article>
					<a href={`/${$locale}/software/localizer`}>
						<h3>Gaois.Localizer</h3>
						<p>{$_('home.sections.localizer')}</p>
					</a>
				</article>
			</li>
			<li>
				<article>
					<a href={`/${$locale}/software/querylogger/v0.7/intro`}>
						<h3>Gaois.QueryLogger</h3>
						<p>{$_('home.sections.queryLogger')}</p>
					</a>
				</article>
			</li>
		</ul>
	</section>
	<aside>
		<p>{$_('global.tagline')}</p>
		<p><a href={`https://www.gaois.ie/${$locale}`} rel='noopener' target='_blank'>{$_('home.moreInfo')} »</a></p>
	</aside>
</div>

<style>
	h2 {
		border-bottom: 1px solid var(--text-color);
		display: block;
		margin-bottom: 1rem;
		padding-bottom: 0.15rem;
		width: 100%;
	}

	h3 {
		font-weight: 700;
		padding-bottom: 0.8rem;
	}

	ul {
		display: flex;
		flex: 1;
		flex-wrap: wrap;
		justify-content: space-between;
		margin: 0;
		padding: 0;
		list-style: none;
	}

	li {
		margin-bottom: 1rem;
		width: 100%;
	}

	header {
		margin-bottom: 3rem;
	}

	section {
		margin: 1rem 0;
	}

	section a {
		text-decoration: none;
	}

	article {
		background-color: var(--secondary-color);
		color: #fff;
		height: 100%;
		padding: 1.4rem 1rem;
	}

	article:hover {
		background-color: var(--primary-color);
	}

	article p {
		font-size: 0.9rem;
	}

	aside {
		background-color: #f0f2f3;
		border-bottom: 4px solid var(--primary-color);
		border-top: 4px solid var(--primary-color);
		margin-top: 1.6rem;
		padding: 0.9rem 1rem 1rem 1rem;
	}

	aside p {
		font-size: 0.95rem;
		margin: 1rem 0;
	}

	.home {
        padding: 1rem 0;
        margin-top: 1.6rem;
        width: 100%;
	}

	@media screen and (min-width: 450px) {
		li {
			width: 48%;
			width: calc((100% - 1rem) / 2);
		}
	}

	@media screen and (min-width: 1000px) {
        .home {
            margin-top: 6rem;
			padding-left: 2rem;
		}
	}
	
	@media screen and (min-width: 1170px) {
        .home {
            max-width: 65%;
            max-width: 770px;
			padding: 1rem 2rem;
			width: 67%;
		}

		li {
			width: 32%;
			width: calc((100% - 2rem) / 3);
		}

		aside {
			max-width: 400px;
			position: absolute;
			right: 1rem;
			top: 11.9rem;
			width: 22.5%;
		}
	}

    @media screen and (min-width: 1600px) {
        .home {
            margin-left: 5%;
        }
    }
</style>