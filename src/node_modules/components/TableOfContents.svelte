<script>
    import { stores } from '@sapper/app';
    import { _ } from 'svelte-i18n';
    
    const { page } = stores();
    
    export let toc;
</script>

{#if !!toc}
    <nav class="contents">
        <h2>{$_(`document.contents`)}</h2>
        <div>{@html toc}</div>
        <a class='top' href={`${$page.path}#`}>{$_(`document.backToTop`)}</a>
    </nav>
{/if}

<style>
    h2 {
        color: #999;
        font-size: 0.9rem;
        margin-bottom: 1rem;
        text-transform: uppercase;
    }

    div :global(a) {
        text-decoration: none;
    }

    div :global(ul) {
        font-size: 0.9rem;
        list-style: none;
        padding: 0;
    }

    div :global(ul ul) {
        padding-left: 1.2rem;
    }

    div :global(li) {
        margin: 0.2rem 0;
    }

    div :global(strong) {
        font-weight: inherit;
    }

    div :global(code) {
        font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
    }

    .contents {
		padding: 1rem;
    }

    .contents div {
        max-height: 80vh;
        max-height: calc(90vh - 120px);
        overflow: auto;
    }

    .top {
        color: #666;
        display: block;
        font-size: 0.8rem;
        margin-top: 0.5rem;
        text-decoration: none;
        text-transform: uppercase;
    }

    @media screen and (min-width: 1000px) {
        .contents {
            order: 1;
            position: fixed;
            right: 0;
            top: 5rem;
            width: 25%;
        }
    }
</style>